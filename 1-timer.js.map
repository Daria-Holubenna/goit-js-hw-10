{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst datetimePicker = document.querySelector(\"#datetime-picker\");\nconst btnStart = document.querySelector(\"button[data-start]\");\nconst daysValue = document.querySelector(\"span[data-days]\");\nconst hoursValue = document.querySelector(\"span[data-hours]\");\nconst minutesValue = document.querySelector(\"span[data-minutes]\");\nconst secondsValue = document.querySelector(\"span[data-seconds]\");\nconst span = document.querySelector(\"span\");\n\ndocument.addEventListener(\"DOMContentLoaded\", ()=>{\n    btnStart.disabled = true;\n})\nlet userSelectedDate = null;\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      console.log(selectedDates[0]);\n      if(selectedDates[0] >= new Date()){\n        userSelectedDate = selectedDates[0];\n        btnStart.disabled = false;\n      }    else {\n        btnStart.disabled = true;\n        iziToast.error({\n            title: 'ERROR',\n            titleColor: '#fff',\n            messageColor: '#fff',\n            backgroundColor: '#ef4040',\n            message: 'Please choose a date in the future',\n            position: 'topRight',\n            color:'#fff'\n        });\n        userSelectedDate = null;\n      }\n    },\n  };\n  \n  flatpickr(datetimePicker, options);\n\n btnStart.addEventListener('click', (ev) =>{\n    if(userSelectedDate !== null){\n        btnStart.disabled = true;\n        datetimePicker.disabled = true;\n        const dateNow = new Date().getTime();\n        const currentTime = userSelectedDate - dateNow;\n        startCountdown(currentTime);\n    } else{\n        iziToast.warning({\n            title: 'Warning',\n      message: 'Please choose a valid date in the future',\n      position: 'topRight',\n      titleColor: '#fff',\n      messageColor: '#fff',\n      backgroundColor: '#ef4040'\n    })\n    }\n })\n let timerInterval = null;\n\n function convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n      const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n  }\n  \n  function addLeadingZero(value) {\n    return String(value).padStart(2, '0');\n  };\n  function startCountdown(duration) {\n    timerInterval = setInterval(() => { \n      const { days, hours, minutes, seconds } = convertMs(duration);   \n      daysValue.textContent = days;\n      hoursValue.textContent = addLeadingZero(hours);\n      minutesValue.textContent = addLeadingZero(minutes);\n      secondsValue.textContent = addLeadingZero(seconds);\n  \n      duration -= 1000;   \n      if (duration < 0) {\n        clearInterval(timerInterval);\n        timerInterval = null;\n        daysValue.textContent = '0'; // Оновлюємо дні на нуль\n        hoursValue.textContent = '00';\n        minutesValue.textContent = '00';\n        secondsValue.textContent = '00';\n        datetimePicker.disabled = false;\n        iziToast.info({\n          title: 'Info',\n          message: 'Час вийшов!'\n        });\n      }\n    }, 1000);\n  }"],"names":["datetimePicker","btnStart","daysValue","hoursValue","minutesValue","secondsValue","userSelectedDate","options","selectedDates","iziToast","flatpickr","ev","dateNow","currentTime","startCountdown","timerInterval","convertMs","ms","days","hours","minutes","seconds","addLeadingZero","value","duration"],"mappings":"+IAMA,MAAMA,EAAiB,SAAS,cAAc,kBAAkB,EAC1DC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAY,SAAS,cAAc,iBAAiB,EACpDC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAe,SAAS,cAAc,oBAAoB,EACnD,SAAS,cAAc,MAAM,EAE1C,SAAS,iBAAiB,mBAAoB,IAAI,CAC9CJ,EAAS,SAAW,EACxB,CAAC,EACD,IAAIK,EAAmB,KACvB,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EACzBA,EAAc,CAAC,GAAK,IAAI,MACzBF,EAAmBE,EAAc,CAAC,EAClCP,EAAS,SAAW,KAEpBA,EAAS,SAAW,GACpBQ,EAAS,MAAM,CACX,MAAO,QACP,WAAY,OACZ,aAAc,OACd,gBAAiB,UACjB,QAAS,qCACT,SAAU,WACV,MAAM,MAClB,CAAS,EACDH,EAAmB,KAEtB,CACL,EAEEI,EAAUV,EAAgBO,CAAO,EAElCN,EAAS,iBAAiB,QAAUU,GAAM,CACvC,GAAGL,IAAqB,KAAK,CACzBL,EAAS,SAAW,GACpBD,EAAe,SAAW,GAC1B,MAAMY,EAAU,IAAI,KAAM,EAAC,QAAO,EAC5BC,EAAcP,EAAmBM,EACvCE,EAAeD,CAAW,CAClC,MACQJ,EAAS,QAAQ,CACb,MAAO,UACb,QAAS,2CACT,SAAU,WACV,WAAY,OACZ,aAAc,OACd,gBAAiB,SACvB,CAAK,CAEL,CAAE,EACD,IAAIM,EAAgB,KAEpB,SAASC,EAAUC,EAAI,CAKlB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC5BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAED,SAASC,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CACE,SAAST,EAAeU,EAAU,CAChCT,EAAgB,YAAY,IAAM,CAChC,KAAM,CAAE,KAAAG,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYL,EAAUQ,CAAQ,EAC5DtB,EAAU,YAAcgB,EACxBf,EAAW,YAAcmB,EAAeH,CAAK,EAC7Cf,EAAa,YAAckB,EAAeF,CAAO,EACjDf,EAAa,YAAciB,EAAeD,CAAO,EAEjDG,GAAY,IACRA,EAAW,IACb,cAAcT,CAAa,EAC3BA,EAAgB,KAChBb,EAAU,YAAc,IACxBC,EAAW,YAAc,KACzBC,EAAa,YAAc,KAC3BC,EAAa,YAAc,KAC3BL,EAAe,SAAW,GAC1BS,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,aACnB,CAAS,EAEJ,EAAE,GAAI,CACX"}